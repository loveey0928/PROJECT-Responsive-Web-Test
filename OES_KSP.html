<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <meta http-equiv="X-UA-Compatible" content="ie=edge"> -->
    <link rel="stylesheet" href="OES_KSP.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@600&display=swap"
      rel="stylesheet"
    />
    <title>Nav bar</title>
    <script
      src="https://kit.fontawesome.com/57be22e3ca.js"
      crossorigin="anonymous"
    ></script>
    <!-- <script src="OES_KSP.js" defer></script> -->
    <style>
      table,
      th,
      td {
        border: 1px solid black;
        border-collapse: collapse;
      }
    </style>
  </head>
  <body>
    <!-- <nav class="navbar">
      <div class="navbar_logo">
        <i class="fas fa-atom fa-2x"></i>
        <a id="mainPageName" href="index.html">SPDRC </a>
      </div>

      <ul class="navbar_menus">
        <li><a href="Youtube.html">OES_Lam</a></li>
        <li><a id="navbar_menu_OES_KSP" href="">OES_KSP</a></li>
        <li><a href="">RGA</a></li>
        <li><a href="">TES_EPD</a></li>
      </ul>

      <ul class="navbar_links">
        <li><i class="fab fa-twitter"></i></li>
        <li><i class="fab fa-google"></i></li>
      </ul>

      <a href="#" class="navbar_toggleBtn">
        <i class="fas fa-bars"></i>
      </a>
    </nav>
    <div class="body">
      <div>
        <img id="electronImage" src="image/전자온도 관련 식.PNG" alt="" />
      </div>
      <div class="dataInput">
        <ul>
          * 파장 1 :
          <input id="waveLength1" type="text" />
          nm
        </ul>
        <ul>
          * 파장 2 :
          <input id="waveLength2" type="text" />
          nm
        </ul>
        <ul>
          <form
            action="http://localhost:3000/upload"
            method="POST"
            enctype="multipart/form-data"
          >
            * 읽어 올 CSV 파일 선택 :
            <input type="file" name="userfile" />
            <input type="submit" value="Upload" />
          </form>
        </ul>
      </div>
      <div class="inputFile"></div>
      <div class="graph"></div>
    </div> -->

    <!-- <input type="button" onclick="getData()" value="butt"> -->

    <script type="text/javascript">
      getData();

      async function getData() {
        // const str = 'The quick brown fox jumps over the lazy dog.';
        // const words = str.split(' ');
        // console.log(words);
        var wavelength1 = '162.403';
        var wavelength2 = '162.998';
        var firstWaveLen;
        var secondWaveLen;
        var response = await fetch(
          '/uploads/2020-06-12_15h45m38s_test5_1_0__condition changed and temp 650.f_oes.csv'
        );
        var data = await response.text();
        // console.log(data);

        const rows = data.split('\n').slice(2);
        console.log(rows);
        var headRow = rows[0].split(',');

        for (var i = 0; i <= headRow.length - 1; i++) {
          if (headRow[i] === wavelength1) {
            firstWaveLen = i;
          } else if (headRow[i] === wavelength2) {
            secondWaveLen = i;
          }
        }

        rows.forEach((elt) => {
          const row = elt.split(',');
          const headTime = row[0];
          const headFirstWaveLen = row[firstWaveLen];
          const headSecondWaveLen = row[secondWaveLen];
          console.log(headTime, headFirstWaveLen, headSecondWaveLen);
        });
        // console.log(firstWaveLen);
        // rows[0].forEach((elt) => {
        //   const row = elt.split(',');
        //   console.log(row);
        // });
        // rows.forEach(elt => {
        //   const row = elt.split(',');
        //   const time = row[0];
        //   const waveLen1 = row[wave]
        // });
        // var rowFilteredData = '';
        // for (var i = 2; i < rows.length; i++) {
        //   // console.log(rows[i]);
        //   rowFilteredData += rows[i] + '\n';
        // }
        // console.log(rowFilteredData);
      }
    </script>
  </body>
</html>
